<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sierra Suites - TaskFlow Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/logged_in.css">
    <link rel="stylesheet" href="assets/css/taskflow.css">
</head>

<body class="taskflow-page">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span>The Sierra Suites</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>

            <div class="user-profile">
                <div class="avatar" id="user-avatar">
                    U
                </div>
                <div class="user-info">
                    <h4 id="user-name">User</h4>
                    <p id="user-email">user@example.com</p>
                </div>
                <button class="profile-menu" id="profileMenu">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <div class="profile-dropdown" id="profileDropdown">
                    <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
                    <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
                    <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="projects.html">
                            <i class="fas fa-project-diagram"></i>
                            <span>Projects</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="taskflow.html">
                            <i class="fas fa-tasks"></i>
                            <span>TaskFlow</span>
                        </a>
                    </li>
                    <li>
                        <a href="fieldsnap.html">
                            <i class="fas fa-camera"></i>
                            <span>FieldSnap</span>
                        </a>
                    </li>
                    <li>
                        <a href="quotehub.html">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <span>QuoteHub</span>
                        </a>
                    </li>
                    <li>
                        <a href="reportcenter.html">
                            <i class="fas fa-chart-pie"></i>
                            <span>ReportCenter</span>
                        </a>
                    </li>
                </ul>

                <div class="nav-divider"></div>

                <ul>
                    <li>
                        <a href="#" id="teamLink">
                            <i class="fas fa-users"></i>
                            <span>Team</span>
                            <span class="feature-pill pro-feature">PRO</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="calendarSyncLink">
                            <i class="fas fa-sync-alt"></i>
                            <span>Calendar Sync</span>
                            <span class="feature-pill pro-feature">PRO</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="milestonesLink">
                            <i class="fas fa-flag"></i>
                            <span>Milestones</span>
                            <span class="feature-pill pro-feature">PRO</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="ganttLink">
                            <i class="fas fa-chart-bar"></i>
                            <span>Gantt Chart</span>
                            <span class="feature-pill pro-feature">ENTERPRISE</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" id="aiAssistantLink">
                            <i class="fas fa-robot"></i>
                            <span>AI Assistant</span>
                            <span class="feature-pill pro-feature">ENTERPRISE</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="topbar">
                <div class="topbar-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title">
                        <h2>TaskFlow</h2>
                        <p>Manage your project tasks and deadlines</p>
                    </div>
                </div>
                <div class="topbar-right">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search tasks..." id="searchInput">
                    </div>
                    <div class="topbar-actions">
                        <button class="notification-btn" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="help-btn">
                            <i class="fas fa-question-circle"></i>
                        </button>
                    </div>
                </div>
            </header>

            <div class="content-container">
                <div class="taskflow-header">
                    <div>
                        <button class="btn btn-primary" id="createTaskBtn">
                            <i class="fas fa-plus"></i> New Task
                        </button>
                        <button class="btn btn-outline" id="createMilestoneBtn">
                            <i class="fas fa-flag"></i> New Milestone
                        </button>
                        <button class="btn btn-outline" id="useTemplateBtn">
                            <i class="fas fa-layer-group"></i> Use Template
                        </button>
                        <span id="completeTasksPill" class="feature-pill">Complete Tasks</span>
                        <span id="teamAssignmentPill" class="feature-pill">Team Assignment</span>
                        <span class="feature-pill pro-feature">PRO</span>
                    </div>
                    <div class="view-toggle">
                        <button class="btn btn-outline active" id="calendarViewBtn">
                            <i class="fas fa-calendar"></i> Calendar
                        </button>
                        <button class="btn btn-outline" id="listViewBtn">
                            <i class="fas fa-list"></i> List
                        </button>
                        <button class="btn btn-outline" id="resourceViewBtn">
                            <i class="fas fa-users"></i> Resources
                        </button>
                        <button class="btn btn-outline" id="ganttViewBtn">
                            <i class="fas fa-chart-bar"></i> Gantt
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="tasks">Tasks & Appointments</div>
                    <div class="tab" data-tab="milestones">Milestones</div>
                    <div class="tab" data-tab="reminders">Reminders</div>
                    <div class="tab" data-tab="sync">Calendar Sync</div>
                    <div class="tab" data-tab="templates">Templates</div>
                </div>

                <div class="tab-content active" id="tasksTab">
                    <div class="calendar-view" id="calendarView">
                        <div class="calendar-header">
                            <h3 id="currentMonth">September 2023</h3>
                            <div class="calendar-nav">
                                <button class="btn btn-icon" id="prevMonth">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-outline btn-small" id="todayBtn">Today</button>
                                <button class="btn btn-icon" id="nextMonth">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <button class="btn btn-outline btn-small" id="syncCalendarBtn">
                                    <i class="fas fa-sync-alt"></i> Sync
                                </button>
                            </div>
                        </div>
                        <div class="calendar-grid-container">
                            <div class="calendar-grid" id="calendarGrid">
                                <div class="calendar-day-header">Sun</div>
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>

                                <!-- Calendar days will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tasks-list" id="tasksListView" style="display: none;">
                        <div class="tasks-header">
                            <h3>My Tasks</h3>
                            <div class="task-filters">
                                <select class="form-select" id="statusFilter">
                                    <option value="all">All Statuses</option>
                                    <option value="pending">Pending</option>
                                    <option value="in-progress">In Progress</option>
                                    <option value="completed">Completed</option>
                                </select>
                                <select class="form-select" id="priorityFilter">
                                    <option value="all">All Priorities</option>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                                <select class="form-select" id="assigneeFilter">
                                    <option value="all">All Assignees</option>
                                    <option value="me">Assigned to Me</option>
                                    <option value="team">Assigned to Team</option>
                                </select>
                                <select class="form-select" id="projectFilter">
                                    <option value="all">All Projects</option>
                                    <!-- Projects will be populated by JavaScript -->
                                </select>
                            </div>
                        </div>
                        <div class="tasks-container" id="tasksContainer">
                            <!-- Tasks will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="gantt-chart" id="ganttView" style="display: none;">
                        <div class="gantt-header">
                            <h3>Project Timeline</h3>
                            <div>
                                <button class="btn btn-outline btn-small" id="prevWeekGanttBtn">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-outline btn-small" id="thisWeekGanttBtn">This Week</button>
                                <button class="btn btn-outline btn-small" id="nextWeekGanttBtn">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="gantt-timeline" id="ganttTimeline">
                            <div class="gantt-sidebar">
                                <h4>Tasks</h4>
                                <!-- Task list will be populated by JavaScript -->
                            </div>
                            <div class="gantt-main">
                                <div class="gantt-period" id="ganttPeriod">
                                    <!-- Timeline headers will be populated by JavaScript -->
                                </div>
                                <!-- Task bars will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="resource-view" id="resourceView" style="display: none;">
                        <div class="resource-header">
                            <h3>Resource Scheduling</h3>
                            <div>
                                <button class="btn btn-outline btn-small" id="prevWeekBtn">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-outline btn-small" id="thisWeekBtn">This Week</button>
                                <button class="btn btn-outline btn-small" id="nextWeekBtn">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="resource-grid">
                            <div class="resource-sidebar">
                                <h4>Team Members</h4>
                                <!-- Team members will be populated by JavaScript -->
                            </div>
                            <div class="resource-timeline" id="resourceTimeline">
                                <!-- Timeline will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="milestonesTab">
                    <div class="tasks-list">
                        <div class="tasks-header">
                            <h3>Project Milestones</h3>
                            <div class="task-filters">
                                <select class="form-select" id="milestoneProjectFilter">
                                    <option value="all">All Projects</option>
                                    <!-- Projects will be populated by JavaScript -->
                                </select>
                                <select class="form-select" id="milestoneStatusFilter">
                                    <option value="all">All Statuses</option>
                                    <option value="upcoming">Upcoming</option>
                                    <option value="achieved">Achieved</option>
                                    <option value="delayed">Delayed</option>
                                </select>
                            </div>
                        </div>
                        <div class="tasks-container" id="milestonesContainer">
                            <!-- Milestones will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="remindersTab">
                    <div class="tasks-list">
                        <div class="tasks-header">
                            <h3>Task Reminders</h3>
                            <button class="btn btn-outline" id="addReminderBtn">
                                <i class="fas fa-plus"></i> Add Reminder
                            </button>
                        </div>
                        <div class="tasks-container" id="remindersContainer">
                            <!-- Reminders will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="syncTab">
                    <div class="tasks-list">
                        <div class="tasks-header">
                            <h3>Calendar Sync</h3>
                            <div>
                                <button class="btn btn-outline" id="syncGoogleBtn">
                                    <i class="fab fa-google"></i> Sync with Google
                                </button>
                                <button class="btn btn-outline" id="syncOutlookBtn">
                                    <i class="fab fa-microsoft"></i> Sync with Outlook
                                </button>
                            </div>
                        </div>
                        <div class="tasks-container">
                            <div class="task-card">
                                <div class="task-card-header">
                                    <div class="task-title">Google Calendar Sync</div>
                                    <span class="task-priority success-color">Connected</span>
                                </div>
                                <div class="task-card-body">
                                    <div class="task-description">
                                        Your calendar is synced with Google Calendar. Changes will be reflected within
                                        15 minutes.
                                    </div>
                                    <div class="task-meta">
                                        <div class="task-meta-item">
                                            <i class="fas fa-sync-alt"></i>
                                            <span>Last synced: 10 minutes ago</span>
                                        </div>
                                        <div class="task-meta-item">
                                            <i class="fas fa-calendar"></i>
                                            <span>25 events synced</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-card-footer">
                                    <div class="sync-status success">
                                        <i class="fas fa-check-circle"></i>
                                        <span>In sync</span>
                                    </div>
                                    <div class="task-actions">
                                        <button class="btn btn-icon">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                        <button class="btn btn-icon">
                                            <i class="fas fa-cog"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="task-card">
                                <div class="task-card-header">
                                    <div class="task-title">Outlook Calendar Sync</div>
                                    <span class="task-priority warning-color">Pending</span>
                                </div>
                                <div class="task-card-body">
                                    <div class="task-description">
                                        Connect your Outlook calendar to sync tasks and appointments.
                                    </div>
                                </div>
                                <div class="task-card-footer">
                                    <div class="sync-status">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Not connected</span>
                                    </div>
                                    <div class="task-actions">
                                        <button class="btn btn-primary btn-small">
                                            Connect
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="templatesTab">
                    <div class="tasks-list">
                        <div class="tasks-header">
                            <h3>Task Templates</h3>
                            <button class="btn btn-primary" id="createTemplateBtn">
                                <i class="fas fa-plus"></i> Create Template
                            </button>
                        </div>
                        <div class="tasks-container">
                            <div class="template-selector" id="templateSelector">
                                <!-- Templates will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Task Modal -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Create New Task</h3>
                <button class="btn btn-icon" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="taskId">
                    <div class="form-group">
                        <label for="taskTitle">Task Title</label>
                        <input type="text" id="taskTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea id="taskDescription" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="taskProject">Project</label>
                        <select id="taskProject" class="form-control" required>
                            <option value="">Select Project</option>
                            <!-- Projects will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskDueDate">Due Date</label>
                        <input type="date" id="taskDueDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Priority</label>
                        <select id="taskPriority" class="form-control" required>
                            <option value="high">High</option>
                            <option value="medium" selected>Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskStatus">Status</label>
                        <select id="taskStatus" class="form-control" required>
                            <option value="pending">Pending</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Assign to Team Member</label>
                        <div class="team-members" id="teamMembers">
                            <!-- Team members will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskReminder">Set Reminder</label>
                        <select id="taskReminder" class="form-control">
                            <option value="">No reminder</option>
                            <option value="15">15 minutes before</option>
                            <option value="30">30 minutes before</option>
                            <option value="60">1 hour before</option>
                            <option value="1440">1 day before</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskBudget">Budgeted Hours (optional)</label>
                        <input type="number" id="taskBudget" class="form-control" min="0" step="0.5">
                    </div>
                </form>

                <!-- Comments Section -->
                <div class="comments-section" id="taskCommentsSection" style="display: none;">
                    <h4>Comments</h4>
                    <div id="taskComments">
                        <!-- Comments will be populated by JavaScript -->
                    </div>
                    <div class="comment-input">
                        <input type="text" id="commentInput" placeholder="Add a comment...">
                        <button class="btn btn-primary" id="addCommentBtn">Add</button>
                    </div>
                </div>

                <!-- Attachments Section -->
                <div class="attachments-section" id="taskAttachmentsSection" style="display: none;">
                    <h4>Attachments</h4>
                    <div id="taskAttachments">
                        <!-- Attachments will be populated by JavaScript -->
                    </div>
                    <div class="form-group">
                        <label for="taskAttachment">Add Attachment</label>
                        <input type="file" id="taskAttachment" class="form-control">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelTask">Cancel</button>
                <button class="btn btn-primary" id="saveTask">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Milestone Modal -->
    <div class="modal-overlay" id="milestoneModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="milestoneModalTitle">Create New Milestone</h3>
                <button class="btn btn-icon" id="closeMilestoneModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="milestoneForm">
                    <input type="hidden" id="milestoneId">
                    <div class="form-group">
                        <label for="milestoneTitle">Milestone Title</label>
                        <input type="text" id="milestoneTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="milestoneDescription">Description</label>
                        <textarea id="milestoneDescription" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="milestoneProject">Project</label>
                        <select id="milestoneProject" class="form-control" required>
                            <option value="">Select Project</option>
                            <!-- Projects will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="milestoneDate">Date</label>
                        <input type="date" id="milestoneDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="milestoneStatus">Status</label>
                        <select id="milestoneStatus" class="form-control" required>
                            <option value="upcoming">Upcoming</option>
                            <option value="achieved">Achieved</option>
                            <option value="delayed">Delayed</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelMilestone">Cancel</button>
                <button class="btn btn-primary" id="saveMilestone">Save Milestone</button>
            </div>
        </div>
    </div>

    <!-- Template Modal -->
    <div class="modal-overlay" id="templateModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="templateModalTitle">Create New Template</h3>
                <button class="btn btn-icon" id="closeTemplateModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="templateForm">
                    <input type="hidden" id="templateId">
                    <div class="form-group">
                        <label for="templateName">Template Name</label>
                        <input type="text" id="templateName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="templateDescription">Description</label>
                        <textarea id="templateDescription" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="templateProjectType">Project Type</label>
                        <select id="templateProjectType" class="form-control" required>
                            <option value="">Select Project Type</option>
                            <option value="residential">Residential</option>
                            <option value="commercial">Commercial</option>
                            <option value="industrial">Industrial</option>
                            <option value="infrastructure">Infrastructure</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Template Tasks</label>
                        <div id="templateTasks">
                            <!-- Template tasks will be populated by JavaScript -->
                        </div>
                        <button type="button" class="btn btn-outline btn-small" id="addTemplateTaskBtn">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelTemplate">Cancel</button>
                <button class="btn btn-primary" id="saveTemplate">Save Template</button>
            </div>
        </div>
    </div>

    <!-- AI Assistant -->
    <div class="ai-assistant" id="aiAssistant" style="display: none;">
        <div class="ai-header">
            <h4>AI Assistant</h4>
            <button class="btn btn-icon" id="closeAIAssistant">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="ai-messages" id="aiMessages">
            <div class="ai-message">
                Hi! I'm your AI assistant. How can I help you with your tasks today?
            </div>
        </div>
        <div class="ai-input">
            <input type="text" id="aiInput" placeholder="Ask something...">
            <button class="btn btn-primary" id="sendAIMessage">Send</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle toast-icon"></i>
        <div class="toast-content">
            <div class="toast-message" id="toastMessage">Operation completed successfully</div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script src="assets/js/taskflow.js"></script>
</body>

</html>